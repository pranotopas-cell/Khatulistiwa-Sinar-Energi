<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PT Khatulistiwa Sinar Energi</title>

<meta name="description" content="Mitra Penyalur dan Transportir BBM Industri wilayah Kalimantan dan Indonesia">
<meta name="keywords" content="Solar Industri, BBM Industri, Penyalur BBM, Transportir BBM">

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,Arial;background:#f4f6fa}
header{background:#0b3d2e;color:white;padding:15px 25px;display:flex;justify-content:space-between;align-items:center}
nav a{color:white;margin-left:15px;text-decoration:none}
.hero{background:linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.6)),url('hero.jpg');background-size:cover;color:white;text-align:center;padding:90px 20px}
.btn{background:#ffc107;padding:12px 25px;border-radius:8px;text-decoration:none;color:black;font-weight:bold;cursor:pointer}
section{padding:60px 15px}
.container{max-width:1100px;margin:auto}
h2{text-align:center;margin-bottom:25px}
.harga-box{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px}
.card{background:white;padding:25px;border-radius:15px;text-align:center;box-shadow:0 6px 15px rgba(0,0,0,.08)}
.card p{font-size:24px;font-weight:bold;color:#0d6efd}
footer{background:#0d6efd;color:white;text-align:center;padding:20px}
canvas{background:white;padding:20px;border-radius:15px;box-shadow:0 6px 15px rgba(0,0,0,.08)}
</style>
</head>

<body>

<header>
<b>PT Khatulistiwa Sinar Energi</b>
<nav>
<a href="#harga">Harga</a>
<a href="#grafik">Grafik</a>
<a href="#kontak">Kontak</a>
</nav>
</header>

<section class="hero">
<h1>KHATULISTIWA SINAR ENERGI</h1>
<p>Mitra Penyalur & Transportir BBM Industri</p>
<a class="btn" href="https://wa.me/628158841410">üìû Hubungi Kami</a>
</section>

<section id="harga">
<div class="container">
<h2>Harga Publish BBM Industri</h2>
<p id="periodeText" style="text-align:center;font-weight:bold"></p>
<div class="harga-box" id="hargaContainer"></div>
<br>
<div style="text-align:center">
<button onclick="loginAdmin()" class="btn">üîê Login Admin</button>
</div>
</div>
</section>

<section id="grafik">
<div class="container">
<h2>Grafik Perubahan Harga</h2>
<canvas id="grafikHarga"></canvas>
</div>
</section>

<section id="kontak">
<div class="container" style="text-align:center">
<h2>Kontak</h2>
üìç Pangkalan Bun, Kalimantan Tengah<br><br>
üì± 08158841410<br><br>
üìß pt.khatulistiwa.sinar.energi@gmail.com
</div>
</section>

<footer>
¬© 2026 PT Khatulistiwa Sinar Energi
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDenqfuE7Sjy773lp3k7WYh_3RRSr3nojM",
  authDomain: "kse-harga-bbm-update.firebaseapp.com",
  projectId: "kse-harga-bbm-update",
  storageBucket: "kse-harga-bbm-update.firebasestorage.app",
  messagingSenderId: "764165984284",
  appId: "1:764165984284:web:a74aed43317539f5f1cfd9",
  measurementId: "G-ZGQ5LG6DH9"
};


const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let wilayah = ["wilayah1","wilayah2","wilayah3","wilayah4"];

function getPeriode(){
let t=new Date();
let tgl=t.getDate();
let bulan=t.toLocaleString('id-ID',{month:'long'});
let tahun=t.getFullYear();
return tgl>=15?`Periode 15 ‚Äì Akhir ${bulan} ${tahun}`:`Periode 1 ‚Äì 14 ${bulan} ${tahun}`;
}

async function loadHarga(){
document.getElementById("periodeText").innerText=getPeriode();
const ref=doc(db,"hargaBBM","periode");
const snap=await getDoc(ref);

if(snap.exists()){
let data=snap.data();
let html="";
let grafikSekarang=[];
let grafikKemarin=[];

wilayah.forEach((w,i)=>{
let sekarang=data.sekarang[w];
let kemarin=data.kemarin[w];
let selisih=sekarang-kemarin;
let warna=selisih>0?"red":"green";
let tanda=selisih>0?"‚ñ≤":"‚ñº";

html+=`
<div class="card">
<h3>Wilayah ${i+1}</h3>
<p>Rp ${sekarang.toLocaleString()}</p>
<small style="color:${warna}">
${tanda} ${Math.abs(selisih).toLocaleString()}
</small>
</div>`;

grafikSekarang.push(sekarang);
grafikKemarin.push(kemarin);
});

document.getElementById("hargaContainer").innerHTML=html;
buatGrafik(grafikSekarang,grafikKemarin);
}
}

function buatGrafik(sekarang,kemarin){
new Chart(document.getElementById("grafikHarga"),{
type:"bar",
data:{
labels:["Wilayah I","Wilayah II","Wilayah III","Wilayah IV"],
datasets:[
{label:"Sekarang",data:sekarang,backgroundColor:"#0d6efd"},
{label:"Kemarin",data:kemarin,backgroundColor:"#6c757d"}
]
}
});
}

window.loginAdmin=async function(){
let pass=prompt("Password Admin:");
if(pass!=="kse2026"){alert("Salah");return;}

const ref=doc(db,"hargaBBM","periode");
const snap=await getDoc(ref);
let data=snap.data();
let baru={};

for(let i=0;i<wilayah.length;i++){
let input=prompt(`Harga Wilayah ${i+1}`,data.sekarang[wilayah[i]]);
baru[wilayah[i]]=Number(input);
}

await updateDoc(ref,{
kemarin:data.sekarang,
sekarang:baru
});

alert("Harga berhasil diupdate");
loadHarga();
}

loadHarga();
</script>

</body>
</html>

